{"version":3,"file":"utilities.cjs.production.min.js","sources":["../src/execution-context.ts","../src/hooks/useIsomorphicLayoutEffect.ts","../src/hooks/useUniqueId.ts","../src/adjustment.ts","../src/css.ts","../src/hooks/useCombinedRefs.ts","../src/hooks/useInterval.ts","../src/hooks/useLazyMemo.ts","../src/hooks/useNodeRef.ts"],"sourcesContent":["// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const canUseDOM =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined';\n","import {useEffect, useLayoutEffect} from 'react';\n\nimport {canUseDOM} from '../execution-context';\n\n/**\n * A hook that resolves to useEffect on the server and useLayoutEffect on the client\n * @param callback {function} Callback function that is invoked when the dependencies of the hook change\n */\nexport const useIsomorphicLayoutEffect = canUseDOM\n  ? useLayoutEffect\n  : useEffect;\n","import {useMemo} from 'react';\n\nlet ids: Record<string, number> = {};\n\nexport function useUniqueId(prefix: string, value?: string) {\n  return useMemo(() => {\n    if (value) {\n      return value;\n    }\n\n    const id = ids[prefix] == null ? 0 : ids[prefix] + 1;\n    ids[prefix] = id;\n\n    return `${prefix}-${id}`;\n  }, [prefix, value]);\n}\n","function createAdjustmentFn(modifier: number) {\n  return <T extends Record<U, number>, U extends string>(\n    object: T,\n    ...adjustments: Partial<T>[]\n  ): T => {\n    return adjustments.reduce<T>(\n      (accumulator, adjustment) => {\n        const entries = Object.entries(adjustment) as [U, number][];\n\n        for (const [key, valueAdjustment] of entries) {\n          const value = accumulator[key];\n\n          if (value != null) {\n            accumulator[key] = (value + modifier * valueAdjustment) as T[U];\n          }\n        }\n\n        return accumulator;\n      },\n      {\n        ...object,\n      }\n    );\n  };\n}\n\nexport const add = createAdjustmentFn(1);\nexport const subtract = createAdjustmentFn(-1);\n","export type Transform = {\n  x: number;\n  y: number;\n  scaleX: number;\n  scaleY: number;\n};\n\nexport interface Transition {\n  property: string;\n  easing: string;\n  duration: number;\n}\n\nexport const CSS = Object.freeze({\n  Translate: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {x, y} = transform;\n\n      return `translate3d(${x ? Math.round(x) : 0}px, ${\n        y ? Math.round(y) : 0\n      }px, 0)`;\n    },\n  },\n  Scale: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {scaleX, scaleY} = transform;\n\n      return `scaleX(${scaleX}) scaleY(${scaleY})`;\n    },\n  },\n  Transform: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      return [\n        CSS.Translate.toString(transform),\n        CSS.Scale.toString(transform),\n      ].join(' ');\n    },\n  },\n  Transition: {\n    toString({property, duration, easing}: Transition) {\n      return `${property} ${duration}ms ${easing}`;\n    },\n  },\n});\n","import {useMemo} from 'react';\n\nexport function useCombinedRefs<T>(\n  ...refs: ((node: T) => void)[]\n): (node: T) => void {\n  return useMemo(\n    () => (node: T) => {\n      refs.forEach((ref) => ref(node));\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    refs\n  );\n}\n","import {useCallback, useRef} from 'react';\n\nexport function useInterval() {\n  const intervalRef = useRef<number | null>(null);\n\n  const set = useCallback((listener: Function, duration: number) => {\n    intervalRef.current = setInterval(listener, duration);\n  }, []);\n\n  const clear = useCallback(() => {\n    if (intervalRef.current !== null) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  return [set, clear] as const;\n}\n","import {useMemo, useRef} from 'react';\n\nexport function useLazyMemo<T>(\n  callback: (prevValue: T | undefined) => T,\n  dependencies: any[]\n) {\n  const valueRef = useRef<T>();\n\n  return useMemo(\n    () => {\n      const newValue = callback(valueRef.current);\n      valueRef.current = newValue;\n\n      return newValue;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [...dependencies]\n  );\n}\n","import {useRef, useCallback} from 'react';\n\nexport function useNodeRef() {\n  const node = useRef<HTMLElement | null>(null);\n  const setNodeRef = useCallback((element: HTMLElement | null) => {\n    node.current = element;\n  }, []);\n\n  return [node, setNodeRef] as const;\n}\n"],"names":["canUseDOM","window","document","createElement","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","ids","createAdjustmentFn","modifier","object","adjustments","reduce","accumulator","adjustment","entries","Object","key","valueAdjustment","value","add","subtract","CSS","freeze","Translate","toString","transform","x","y","Math","round","Scale","scaleX","scaleY","Transform","join","Transition","property","duration","easing","refs","useMemo","node","forEach","ref","intervalRef","useRef","useCallback","listener","current","setInterval","clearInterval","callback","dependencies","valueRef","newValue","setNodeRef","element","prefix","id"],"mappings":"2FACA,MAAaA,EACO,oBAAXC,aACoB,IAApBA,OAAOC,eAC2B,IAAlCD,OAAOC,SAASC,cCIZC,EAA4BJ,EACrCK,kBACAC,YCRJ,IAAIC,EAA8B,GCFlC,SAASC,EAAmBC,SACnB,CACLC,KACGC,IAEIA,EAAYC,OACjB,CAACC,EAAaC,WACNC,EAAUC,OAAOD,QAAQD,OAE1B,MAAOG,EAAKC,KAAoBH,EAAS,OACtCI,EAAQN,EAAYI,GAEb,MAATE,IACFN,EAAYI,GAAQE,EAAQV,EAAWS,UAIpCL,GAET,IACKH,UAMEU,EAAMZ,EAAmB,GACzBa,EAAWb,GAAoB,GCd/Bc,EAAMN,OAAOO,OAAO,CAC/BC,UAAW,CACTC,SAASC,OACFA,eAICC,EAACA,EAADC,EAAIA,GAAKF,uBAEOC,EAAIE,KAAKC,MAAMH,GAAK,QACxCC,EAAIC,KAAKC,MAAMF,GAAK,YAI1BG,MAAO,CACLN,SAASC,OACFA,eAICM,OAACA,EAADC,OAASA,GAAUP,kBAERM,aAAkBC,OAGvCC,UAAW,CACTT,SAASC,MACFA,QAIE,CACLJ,EAAIE,UAAUC,SAASC,GACvBJ,EAAIS,MAAMN,SAASC,IACnBS,KAAK,OAGXC,WAAY,CACVX,SAAQ,EAACY,SAACA,EAADC,SAAWA,EAAXC,OAAqBA,QAClBF,KAAYC,OAAcC,8GCjDrCC,UAEIC,UACL,IAAOC,IACLF,EAAKG,QAASC,GAAQA,EAAIF,KAG5BF,yCCPIK,EAAcC,SAAsB,YAanC,CAXKC,cAAY,CAACC,EAAoBV,KAC3CO,EAAYI,QAAUC,YAAYF,EAAUV,IAC3C,IAEWS,cAAY,KACI,OAAxBF,EAAYI,UACdE,cAAcN,EAAYI,SAC1BJ,EAAYI,QAAU,OAEvB,uECXHG,EACAC,SAEMC,EAAWR,kBAEVL,UACL,WACQc,EAAWH,EAASE,EAASL,gBACnCK,EAASL,QAAUM,EAEZA,OAGLF,yCCbAX,EAAOI,SAA2B,MAClCU,EAAaT,cAAaU,IAC9Bf,EAAKO,QAAUQ,GACd,UAEI,CAACf,EAAMc,iCNJYE,EAAgBvC,UACnCsB,UAAQ,QACTtB,SACKA,QAGHwC,EAAoB,MAAfpD,EAAImD,GAAkB,EAAInD,EAAImD,GAAU,SACnDnD,EAAImD,GAAUC,KAEJD,KAAUC,KACnB,CAACD,EAAQvC"}